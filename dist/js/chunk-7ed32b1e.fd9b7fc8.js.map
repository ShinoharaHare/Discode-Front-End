{"version":3,"sources":["webpack:///./node_modules/embed-plugin-utilities/src/string-replace-async.js","webpack:///./node_modules/embed-plugin-utilities/src/insert.js","webpack:///./node_modules/embed-plugin-utilities/src/with-details-template.js","webpack:///./node_modules/embed-plugin-utilities/src/without-details-template.js","webpack:///./node_modules/embed-plugin-utilities/src/get-query.js","webpack:///./node_modules/embed-plugin-utilities/src/index.js","webpack:///./node_modules/just-pluck-it/index.js","webpack:///./node_modules/just-flatten-it/index.js","webpack:///./node_modules/embed-plugin-base/src/index.js","webpack:///./node_modules/embed-plugin-noembed/node_modules/is-dom/index.js","webpack:///./node_modules/embed-plugin-noembed/src/noembed-regex.js","webpack:///./node_modules/embed-plugin-noembed/src/index.js","webpack:///./node_modules/just-truncate/index.js"],"names":["matchAll","str","re","matches","res","exec","push","global","replaceAll","reverse","reduce","match","prefix","slice","index","postfix","length","replacement","assignReplacement","replacer","args","concat","input","apply","then","concurrency","promises","map","Promise","all","processString","processor","stringReplaceAsync","lastIndex","resolve","e","reject","anchorRegex","getAnchorRegex","regex","RegExp","source","isMatchPresent","text","test","isAnchorTagApplied","result","plugins","filter","plugin","id","saveServiceName","_services","x","async","pushEmbedContent","options","pluginOptions","_embeds","content","getTemplate","find","saveEmbedData","opts","url","getMatch","string","_process","template","data","basicReplace","replaceUrl","_replaceAnyways","anchorReplace","t","inlineEmbed","_ignoreAnchorCheck","_ignoreInlineCheck","output","title","embedUrl","description","thumbnail","thumbClassName","showPlayIcon","name","height","esc","encodeURIComponent","Object","keys","params","k","join","pluck","collection","propertyName","Error","len","i","key","Array","isArray","module","exports","flatten","arr","elem","defaultOptions","_onLoadInternal","onLoad","isNode","val","window","Node","nodeType","nodeName","regexes","patterns","getRegexes","excludeServices","includedRegexes","r","indexOf","toLowerCase","isServicePresent","serviceName","service","fetch","json","html","noEmbed","exclude","twttr","widgets","load","events","bind","truncate","end","Math","max"],"mappings":"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","file":"js/chunk-7ed32b1e.fd9b7fc8.js","sourcesContent":["import extend from \"just-extend\"\n\nfunction matchAll(str, re) {\n  const matches = []\n  let res = re.exec(str)\n\n  while (res) {\n    matches.push(res)\n\n    if (!re.global) {\n      break\n    }\n\n    res = re.exec(str)\n  }\n  return matches\n}\n\nfunction replaceAll(str, matches) {\n  return matches.reverse().reduce(function(res, match) {\n    const prefix = res.slice(0, match.index)\n    const postfix = res.slice(match.index + match[0].length)\n\n    return prefix + match.replacement + postfix\n  }, str)\n}\n\nfunction assignReplacement(match, replacer) {\n  const args = match.concat([match.index, match.input])\n\n  return replacer.apply(null, args).then(function(res) {\n    return extend({}, match, { replacement: res })\n  })\n}\n\nfunction concurrency(matches, replacer) {\n  const promises = matches.map(function(match) {\n    return assignReplacement(match, replacer)\n  })\n\n  return Promise.all(promises)\n}\n\nfunction processString(str, re, replacer) {\n  const matches = matchAll(str, re)\n  const processor = concurrency\n\n  return processor(matches, replacer).then(function(matches) {\n    return replaceAll(str, matches)\n  })\n}\n\nfunction stringReplaceAsync(str, re, replacer) {\n  re.lastIndex = 0\n  try {\n    return Promise.resolve(processString(str, re, replacer))\n  } catch (e) {\n    return Promise.reject(e)\n  }\n}\n\nexport default stringReplaceAsync\n","import extend from \"just-extend\"\nimport stringReplaceAsync from \"./string-replace-async\"\n\nconst anchorRegex = /<a[^>]*>([^<]+)<\\/a>/gi\n\nfunction getAnchorRegex(regex) {\n  return new RegExp(`<a[^>]*>(${regex.source})<\\\\/a>`, \"gi\")\n}\n\n/**\n * Returns the matched regex data or whether the text has any matching string\n * @param regex Regex of the matching pattern\n * @param text String which has to be searched\n * @param test Return boolean or matching array\n * @returns {*} Boolean|Array\n */\nfunction isMatchPresent(regex, text, test = false) {\n  return test ? regex.test(text) : text.match(regex)\n}\n\n/**\n * Tells wheteher the matching string is present inside an anchor tag\n * @param text\n * @returns {*} Boolean\n * @param regex\n */\nfunction isAnchorTagApplied({ result, plugins = [] }, { regex }) {\n  return (\n    getAnchorRegex(regex).test(result) ||\n    plugins.filter(plugin => plugin.id === \"url\").length\n  )\n}\n\nfunction saveServiceName({ _services }, { id }, match) {\n  if (!_services.filter(x => x.match === match).length) {\n    _services.push({ id, match })\n  }\n}\n\nasync function pushEmbedContent(text, options, pluginOptions, index) {\n  const { regex } = pluginOptions\n  await stringReplaceAsync(text, regex, async (...args) => {\n    options._embeds.push({\n      content: await getTemplate(args, options, pluginOptions),\n      index: index || args.find(x => typeof x === \"number\")\n    })\n    saveServiceName(options, pluginOptions, args[0])\n  })\n  return options\n}\n\n/**\n * Save the embed code into an array that can be added later to the end of original string\n * @param opts\n * @param pluginOptions\n */\nasync function saveEmbedData(opts, pluginOptions) {\n  const { regex } = pluginOptions\n  let options = extend({}, opts)\n\n  if (isAnchorTagApplied(options, { regex })) {\n    await stringReplaceAsync(\n      options.result,\n      anchorRegex,\n      async (match, url, index) => {\n        if (!isMatchPresent(regex, match, true)) return match\n        saveServiceName(options, pluginOptions, match)\n        options = await pushEmbedContent(url, options, pluginOptions, index)\n        return match\n      }\n    )\n  } else {\n    options = pushEmbedContent(options.result, options, pluginOptions)\n  }\n\n  return options\n}\n\nfunction getMatch(regex, string) {\n  regex.lastIndex = 0\n  const matches = regex.exec(string)\n  regex.lastIndex = 0\n  return matches\n}\n\nasync function getTemplate(args, options, pluginOptions) {\n  const { _process, template } = pluginOptions\n  let data\n  if (_process) {\n    data = await _process(args, options, pluginOptions)\n  }\n  return template(args, options, pluginOptions, data)\n}\n\nasync function basicReplace(options, pluginOptions) {\n  const { result, replaceUrl } = options\n  const { regex, _replaceAnyways } = pluginOptions\n  return stringReplaceAsync(result, regex, async (...args) => {\n    saveServiceName(options, pluginOptions, args[0])\n    return replaceUrl || _replaceAnyways\n      ? getTemplate(args, options, pluginOptions)\n      : `${args[0]} ${await getTemplate(args, options, pluginOptions)}`\n  })\n}\n\nasync function anchorReplace(options, pluginOptions) {\n  const { result, replaceUrl } = options\n  const { regex, _replaceAnyways } = pluginOptions\n\n  return stringReplaceAsync(result, anchorRegex, async (match, url) => {\n    if (!isMatchPresent(regex, url, true)) {\n      return match\n    }\n\n    if (!(replaceUrl || _replaceAnyways)) {\n      const args = getMatch(regex, url)\n      saveServiceName(options, pluginOptions, args[0])\n      const t = await getTemplate(args, options, pluginOptions)\n      return args ? match + t : match\n    }\n    return stringReplaceAsync(url, regex, async (...args) => {\n      saveServiceName(options, pluginOptions, args[0])\n      return getTemplate(args, options, pluginOptions)\n    })\n  })\n}\n\n/**\n * Insert the embed code in the original string.\n * @param options\n * @param pluginOptions\n * @returns options\n */\nexport default async function(options, pluginOptions) {\n  const { inlineEmbed } = options\n  const { _ignoreAnchorCheck, _ignoreInlineCheck, regex } = pluginOptions\n\n  if (!inlineEmbed && !_ignoreInlineCheck) {\n    return saveEmbedData(options, pluginOptions)\n  }\n\n  let output\n\n  output =\n    isAnchorTagApplied(options, { regex }) && !_ignoreAnchorCheck\n      ? await anchorReplace(options, pluginOptions)\n      : await basicReplace(options, pluginOptions)\n\n  return extend({}, options, {\n    result: output\n  })\n}\n","import truncate from \"just-truncate\"\n\nexport default function(\n  { url, title, embedUrl, description, thumbnail },\n  thumbClassName,\n  showPlayIcon = false\n) {\nreturn `<div class=\"ejs-preview ejs-embed\"><div class=\"ejs-thumb ${thumbClassName}\" data-url=\"${embedUrl}\" style=\"background-image:url(${thumbnail})\">${showPlayIcon ? '<span>&#9658;</span>' : ''}</div><div class=\"ejs-info\"><h4 class=\"ejs-title\"><a href=\"${url}\">${title}</a></h4><div class=\"ejs-desc\">${truncate(\n    description,\n    150\n  )}</div></div></div>`\n}\n","export default function(embedUrl, height, name) {\n  return `<iframe class=\"ejs-embed ejs-${name}\" src=\"${embedUrl}\" frameBorder=\"0\" height=\"${height}\"></iframe>`\n}\n","export default function(params) {\n  const esc = encodeURIComponent\n  return Object.keys(params).map(k => `${esc(k)}=${esc(params[k])}`).join(\"&\")\n}\n","import insert from \"./insert\"\nimport withDetailsTemplate from \"./with-details-template\"\nimport withoutDetailsTemplate from \"./without-details-template\"\nimport getQuery from \"./get-query\"\n\nexport { insert, withDetailsTemplate, withoutDetailsTemplate, getQuery }\n","module.exports = pluck;\n\n/*\n  var arr = [{a:1, b:2}, {a:4, b:3}, {a:2, b:5}];\n  pluck(arr, 'a'); // [1, 4, 2]\n  var obj = {x: {a:1, b:2}, y: {a:4, b:3}, z: {a:2, b:5}];\n  pluck(obj, 'a'); // {x: 1, y: 4, z: 2}\n*/\n\nfunction pluck(collection, propertyName) {\n  if (!collection || typeof collection != 'object') {\n    return new Error('expected first argument to be an object or array');\n  }\n\n  var result, len, i, keys, key;\n  if (Array.isArray(collection)) {\n    result = [];\n    len = collection.length;\n    for (i = 0; i < len; i++) {\n      result.push(collection[i][propertyName]);\n    }\n  } else {\n    result = {};\n    keys = Object.keys(collection);\n    len = keys.length;\n    for (i = 0; i < len; i++) {\n      key = keys[i];\n      result[key] = collection[key][propertyName];\n    }\n  }\n  return result;\n}\n","module.exports = flatten;\n\n/*\n  flatten([[1, [2, 3]], [[4, 5], 6, 7, [8, 9]]]);\n  // [1, 2, 3, 4, 5, 6, 7, 8, 9]\n*/\n\nfunction flatten(arr) {\n  if (!Array.isArray(arr)) {\n    throw new Error('expected an array');\n  }\n  var result = [];\n  var len = arr.length;\n  for (var i = 0; i < len; i++) {\n    var elem = arr[i];\n    if (Array.isArray(elem)) {\n      result.push.apply(result, flatten(elem));\n    } else {\n      result.push(elem);\n    }\n  }\n  return result;\n}\n","import extend from \"just-extend\"\nimport { insert } from \"embed-plugin-utilities\"\n\nexport default opts => {\n  const defaultOptions = {\n    _replaceAnyways: false,\n    _ignoreAnchorCheck: false,\n    _ignoreInlineCheck: false,\n    onLoad() {}\n  }\n\n  const pluginOptions = extend({}, defaultOptions, opts)\n\n  const { _onLoadInternal, onLoad, regex, template, id } = pluginOptions\n\n  if (!regex) {\n    throw new Error(\"regex not passed.\")\n  }\n  if (!template) {\n    throw new Error(\"template not passed.\")\n  }\n\n  return {\n    id,\n\n    async transform(options) {\n      return extend({}, options, await insert(options, pluginOptions))\n    },\n\n    onLoad(options) {\n      if (_onLoadInternal) {\n        _onLoadInternal(options, pluginOptions)\n      }\n      if (onLoad) {\n        onLoad(options, pluginOptions)\n      }\n    }\n  }\n}\n","module.exports = isNode\n\nfunction isNode (val) {\n  return (!val || typeof val !== 'object')\n    ? false\n    : (typeof window === 'object' && typeof window.Node === 'object')\n      ? (val instanceof window.Node)\n      : (typeof val.nodeType === 'number') &&\n        (typeof val.nodeName === 'string')\n}\n","import pluck from \"just-pluck-it\"\nimport flatten from \"just-flatten-it\"\n\nconst regexes = [\n  {\n    patterns: [\"https?://soundcloud.com/.*/.[^\\\\s]*\"],\n    name: \"SoundCloud\"\n  },\n  {\n    name: \"slideshare\",\n    patterns: [\n      \"https?://www\\\\.slideshare\\\\.net/.*/.[^\\\\s]*\",\n      \"https?://fr\\\\.slideshare\\\\.net/.*/.[^\\\\s]*\",\n      \"https?://de\\\\.slideshare\\\\.net/.*/.[^\\\\s]*\",\n      \"https?://es\\\\.slideshare\\\\.net/.*/.[^\\\\s]*\",\n      \"https?://pt\\\\.slideshare\\\\.net/.*/.[^\\\\s]*\"\n    ]\n  },\n  {\n    name: \"vimeo\",\n    patterns: [\n      \"https?://vimeo\\\\.com/.[^\\\\s]*\",\n      \"https?://vimeo\\\\.com/album/.*/video/.[^\\\\s]*\",\n      \"https?://vimeo\\\\.com/channels/.*/.[^\\\\s]*\",\n      \"https?://vimeo\\\\.com/groups/.*/videos/.[^\\\\s]*\",\n      \"https?://vimeo\\\\.com/ondemand/.*/.[^\\\\s]*\"\n    ]\n  },\n  {\n    patterns: [\n      \"https?://photos\\\\.app\\\\.net/.*/.[^\\\\s]*\",\n      \"https?://live\\\\.amcharts\\\\.com/.[^\\\\s]*\",\n      \"https?://codepen\\\\.io/.[^\\\\s]*\",\n      \"https?://codepen\\\\.io/.[^\\\\s]*\",\n      \"https?://www\\\\.collegehumor\\\\.com/video/.[^\\\\s]*\",\n      \"https?://www\\\\.dailymotion\\\\.com/video/.[^\\\\s]*\",\n      \"https?://.*\\\\.deviantart\\\\.com/art/.[^\\\\s]*\",\n      \"https?://.*\\\\.deviantart\\\\.com/.*#/d.[^\\\\s]*\",\n      \"https?://dotsub\\\\.com/view/.[^\\\\s]*\",\n      \"https?://.*\\\\.flickr\\\\.com/photos/.[^\\\\s]*\",\n      \"https?://flic\\\\.kr/p/.[^\\\\s]*\",\n      \"https?://.*\\\\.wikimedia\\\\.org/.*_geograph\\\\.org\\\\.uk_.[^\\\\s]*\",\n      \"https?://gfycat\\\\.com/.[^\\\\s]*\",\n      \"https?://www\\\\.gfycat\\\\.com/.[^\\\\s]*\",\n      \"https?://gfycat\\\\.com/.[^\\\\s]*\",\n      \"https?://www\\\\.gfycat\\\\.com/.[^\\\\s]*\",\n      \"https?://giphy\\\\.com/gifs/.[^\\\\s]*\",\n      \"https?://media\\\\.giphy\\\\.com/media/.*/giphy\\\\.gif\",\n      \"https?://www\\\\.hulu\\\\.com/watch/.[^\\\\s]*\",\n      \"https?://www\\\\.kickstarter\\\\.com/projects/.[^\\\\s]*\",\n      \"https?://www\\\\.mixcloud\\\\.com/.*/.*/\",\n      \"https?://reddit\\\\.com/r/.*/comments/.*/.[^\\\\s]*\",\n      \"https?://.*\\\\.screen9\\\\.tv/.[^\\\\s]*\",\n      \"https?://www\\\\.scribd\\\\.com/doc/.[^\\\\s]*\",\n      \"https?://.*\\\\.smugmug\\\\.com/.[^\\\\s]*\",\n      \"https?://soundcloud\\\\.com/.[^\\\\s]*\",\n      \"https?://play\\\\.soundsgood\\\\.co/playlist/.[^\\\\s]*\",\n      \"https?://speakerdeck\\\\.com/.*/.[^\\\\s]*\",\n      \"https?://speakerdeck\\\\.com/.*/.[^\\\\s]*\",\n      \"https?://ted\\\\.com/talks/.[^\\\\s]*\",\n      \"https?://www\\\\.nytimes\\\\.com/svc/oembed\",\n      \"https?://nytimes\\\\.com/.[^\\\\s]*\",\n      \"https?://.*\\\\.nytimes\\\\.com/.[^\\\\s]*\",\n    //   \"https?://clips\\\\.twitch\\\\.tv/.[^\\\\s]*\",\n    //   \"https?://clips\\\\.twitch\\\\.tv/.[^\\\\s]*\",\n    //   \"https?://www\\\\.twitch\\\\.tv/.[^\\\\s]*\",\n    //   \"https?://www\\\\.twitch\\\\.tv/.[^\\\\s]*\",\n    //   \"https?://twitch\\\\.tv/.[^\\\\s]*\",\n    //   \"https?://twitch\\\\.tv/.[^\\\\s]*\",\n      \"https?://.*\\\\.ustream\\\\.tv/.[^\\\\s]*\",\n      \"https?://.*\\\\.ustream\\\\.com/.[^\\\\s]*\",\n      \"https?://veervr\\\\.tv/videos/.[^\\\\s]*\",\n      \"https?://www\\\\.vevo\\\\.com/.[^\\\\s]*\",\n      \"https?://www\\\\.vevo\\\\.com/.[^\\\\s]*\",\n      \"https?://player\\\\.vimeo\\\\.com/video/.[^\\\\s]*\",\n      \"https?://vine\\\\.co/v/.[^\\\\s]*\",\n      \"https?://vine\\\\.co/v/.[^\\\\s]*\"\n    ],\n    name: \"oEmbed\"\n  },\n  {\n    name: \"Imgur\",\n    patterns: [\"https?://imgur\\\\.com/(?:[^\\\\/]+/)?[0-9a-zA-Z]+$\"]\n  },\n  {\n    patterns: [\n      \"https?://www\\\\.(dropbox\\\\.com/s/.+\\\\.(?:jpg|png|gif))\",\n      \"https?://db\\\\.tt/[a-zA-Z0-9][^\\\\s]+\"\n    ],\n    name: \"Dropbox\"\n  },\n  // #if IS_CJS\n  {\n    patterns: [\n      \"https?:\\\\/\\\\/(?:[^\\\\.]+\\\\.)?youtube\\\\.com\\\\/watch\\\\/?\\\\?(?:.+&)?v=([^&][^\\\\s]+)\",\n      \"https?://(?:[^\\\\.]+\\\\.)?(?:youtu\\\\.be|youtube\\\\.com/embed)/([a-zA-Z0-9_-][^\\\\s]+)\"\n    ],\n    name: \"YouTube\"\n  },\n  // #endif\n  {\n    patterns: [\n      \"https?://(?:www|mobile\\\\.)?twitter\\\\.com/(?:#!/)?([^/]+)/status(?:es)?/(\\\\d+)\"\n    ],\n    name: \"Twitter\"\n  }\n]\n\nexport default function getRegexes(excludeServices = []) {\n  const includedRegexes = regexes.filter(\n    r => excludeServices.indexOf(r.name.toLowerCase()) === -1\n  )\n  const patterns = flatten(pluck(includedRegexes, \"patterns\"))\n  return new RegExp(patterns.join(\"|\"), \"gi\")\n}\n\nexport function isServicePresent(serviceName, text) {\n  const service = regexes.filter(r => r.name.toLowerCase() === serviceName)[0]\n  const regex = new RegExp(service.patterns.join(\"|\"), \"gi\")\n  return regex.test(text)\n}\n","import extend from \"just-extend\"\nimport isBrowser from \"is-in-browser\"\nimport isDom from \"is-dom\"\nimport getRegex, { isServicePresent } from \"./noembed-regex\"\nimport base from \"embed-plugin-base\"\n\nconst id = \"noEmbed\"\n\n/**\n * Fetches the data from the noembed API\n * @param args\n * @returns {Promise.<*>}\n */\nasync function _process(args, { fetch }) {\n  const url = args[0]\n  try {\n    const res = await fetch(`https://noembed.com/embed?url=${url}`)\n    return await res.json()\n  } catch (e) {\n    return {\n      html: url\n    }\n  }\n}\n\nfunction noEmbed(opts = {}) {\n  const defaultOptions = {\n    id,\n    // Regex to be used to identify noembed supported services.\n    // By default it takes from noembed-regex.js\n    regex: null,\n\n    // In case you want to exclude a few services, you can do it here.\n    // It accepts an array of service names in lowercase.\n    exclude: [],\n\n    twttr: isBrowser ? window.twttr : null,\n\n    onLoad() {},\n\n    async template(args, options, pluginOptions, { html }) {\n      return `<div class=\"ejs-embed\">${html}</div>`\n    },\n\n    _onLoadInternal({ input, result }, { twttr, onLoad }) {\n      if (isServicePresent(\"twitter\", result) && twttr && isDom(input)) {\n        twttr.widgets.load(input)\n        twttr.events.bind(\"loaded\", onLoad)\n      }\n    }\n  }\n\n  const pluginOptions = extend({}, defaultOptions, opts, {\n    _process\n  })\n\n  if (!opts.regex) {\n    pluginOptions.regex = getRegex(pluginOptions.exclude)\n  }\n\n  return base(pluginOptions)\n}\n\nnoEmbed.id = id\n\nexport default noEmbed\n","module.exports = truncate;\n\n/*\n  truncate('when shall we three meet again', 9); // 'when s...'\n  truncate('when shall we three meet again', 10, ' (etc)'); // 'when (etc)'\n  truncate('when shall we', 15,); // 'when shall we'\n  truncate('when shall we', 15, '(more)'); // 'when shall we'\n  truncate('when shall we', 7, ' (more)'); // ' (more)'\n*/\n\nfunction truncate(str, length, end) {\n  if (length == null || length >= str.length) {\n    return str;\n  }\n  if (end == null) {\n    end = '...';\n  }\n  return str.slice(0, Math.max(0, length - end.length)) + end;\n}\n"],"sourceRoot":""}